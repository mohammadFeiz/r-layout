function _defineProperty(e,t,r){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}import e,{createContext as t,useContext as r,useState as n}from"react";import o from"jquery";import"./index.css";import{jsx as i}from"react/jsx-runtime";import{Fragment as s}from"react/jsx-runtime";import{jsxs as a}from"react/jsx-runtime";let RVDContext=t({});export default function l(e){let{rootNode:t}=e,[r]=n({});function o(e){return r[e]}function s(e,t){r[e]=t}let[a,l]=n(e.state),d=(e,t)=>l("string"==typeof e?{...a,[e]:t}:e);return i(RVDContext.Provider,{value:{getTemp:o,setTemp:s,rootProps:e,state:a,setState:d},children:i(RVDNode,{node:t,index:0,level:0})})};function RVDNode(e){var t;let n=r(RVDContext),{rootProps:o,state:l,setState:d}=n,{parent:h,index:c,level:u}=e;if(!e.node||null===e.node||("function"==typeof e.node.show?e.node.show():e.node.show)===!1)return null;let m=function t(){var r,n,i,s;let{node:a}=e;o.editNode&&(a=o.editNode(a,h)),a.loading=(r=a,n=h,"boolean"==typeof r.loading?r.loading:!!n&&!!n.loading);let l;return a.nodeClasses=(i=a,s=h,l=[],s&&s.nodeClasses&&(l=[...s.nodeClasses]),i.nodeClass&&(l=[...l,i.nodeClass]),l),a}(),p,f,g=p=(f=function e(t){let r=[];if(t.row)r="function"==typeof t.row?t.row({state:l,setState:d}):t.row;else if(t.column)r="function"==typeof t.column?t.column({state:l,setState:d}):t.column;else if(t.grid){let{gridCols:n=2}=t,o="function"==typeof t.grid?t.grid({state:l,setState:d}):t.grid;for(let i=0;i<o.length;i+=n){let s=[],a="function"==typeof t.gridRow?t.gridRow(i):t.gridRow;for(let h=i;h<i+n;h++)o[h]&&s.push(o[h]);r.push({row:[...s],...a})}t.column=[...r]}return r}(t=m)).length?f.map((e,r)=>{let n=void 0===e.key?r:e.key;return i(RVDNode,{node:e,index:r,level:u+1,parent:t},n)}):function e(t){let{html:r="",loading:n}=t;r="function"==typeof r?r({state:l,setState:d}):r;let o;return n&&r?a(s,{children:[i("div",{style:{opacity:0},children:r}),i("div",{className:"rvd-loading"})]}):r}(t),v=new RVDAttrs({node:m,parent:h,level:u,index:c,context:n}).getAttrs(),$=getGap({node:m,parent:h,dataId:v["data-id"],rtl:o.rtl,index:c,level:u,context:n});return a(s,{children:[i("div",{...v,children:g}),null!==$&&$]})}class RVDAttrs{constructor(e){_defineProperty(this,"node",void 0),_defineProperty(this,"parent",void 0),_defineProperty(this,"level",void 0),_defineProperty(this,"index",void 0),_defineProperty(this,"context",void 0),_defineProperty(this,"getStyle",()=>{let{size:e,flex:t,attrs:r={}}=this.node,n={...this.node.style||r.style||{}};return void 0!==e&&this.parent&&(this.parent.row?(n.width=e,t=void 0):(this.parent.column||this.parent.grid)&&(n.height=e,t=void 0)),{flex:t,...n}}),_defineProperty(this,"getOnClick",()=>{let{onClick:e,attrs:t={},loading:r}=this.node;if(!r)return e||t.onClick}),_defineProperty(this,"getDragAttrs",()=>{let e=this.parent&&this.parent.reOrder&&Array.isArray(this.parent.data),t=this.node.onDrag||this.node.onDrop;if(!e&&!t)return{};let{rootProps:r,getTemp:n,setTemp:i}=this.context,{dragHandleClassName:s}=r,a={};return a.draggable=!0,a.onDragStart=t=>{(!s||o(t.target).hasClass(s)||0!==o(t.target).parents("."+s).length)&&(e?i("dragIndex",this.index):this.node.onDrag&&this.node.onDrag(t))},a.onDragOver=e=>e.preventDefault(),a.onDrop=t=>{if(e){let r=n("dragIndex");!1!==r&&r!==this.index&&(this.parent.reOrder(ReOrder({data:this.parent.data,fromIndex:r,toIndex:this.index}),r,this.index),i("dragIndex",!1))}else this.node.onDrop&&this.node.onDrop(t)},a}),_defineProperty(this,"getClassName",()=>{let{classes:e={}}=this.context.rootProps,t="rvd";0===this.level&&(t+=" rvd-root");let{attrs:r={},nodeClass:n,nodeClasses:o,row:i,column:s,grid:a,loading:l,wrap:d}=this.node;if(this.node.className){let h,c=e[h=Array.isArray(this.node.className)?this.node.className.filter(e=>!!e&&"string"==typeof e).join(" "):this.node.className];"function"==typeof c?h=c(this.node,this.parent):"string"==typeof c&&(h=c),h&&"string"==typeof h&&(t+=" "+h)}d&&(t+=" wrap"),n&&(t+=" "+o.join("-")),r.onClick&&(t+=" pointer"),this.node.align&&(t+=` align-${this.node.align}`),i?t+=" rvd-row":(s||a)&&(t+=" rvd-column"),l&&(t+=" rvd-parent-loading");let u=getHideClassName(this.node);return u&&(t+=" "+u),t}),_defineProperty(this,"getLongTouchAttrs",e=>{let{longTouch:t}=this.node,{setTemp:r}=this.context;if("function"!=typeof t)return{};let n={};return n["ontouchstart"in document.documentElement?"onTouchStart":"onMouseDown"]=n=>{r("lt",e),r(e+"callback",t),this.timer(),eventHandler("mouseup",this.longTouchMouseUp)},n}),_defineProperty(this,"timer",()=>{let{setTemp:e,getTemp:t}=this.context,r=t("lt");e("time",0),e(r+"interval",setInterval(()=>{let n=t("time");if(e("time",++n),n>50){clearInterval(t(r+"interval"));t(r+"callback")()}},10))}),_defineProperty(this,"longTouchMouseUp",()=>{let{getTemp:e}=this.context;eventHandler("mouseup",this.longTouchMouseUp,"unbind");let t=e("lt");clearInterval(e(t+"interval"))}),_defineProperty(this,"getAttrs",()=>{let e=this.node.attrs?{...this.node.attrs}:{},t="a"+Math.random();return e["data-id"]=t,e.style=this.getStyle(),e.onClick=this.getOnClick(),(e={...e,...this.getDragAttrs()}).className=this.getClassName(),e={...e,...this.getLongTouchAttrs(t)}});let{node:t,parent:r,level:n,index:i,context:s}=e;this.node=t,this.parent=r,this.level=n,this.index=i,this.context=s}}export function animate(e,t,r){"removeV"===e?o(t).animate({opacity:0},250).animate({height:0,padding:0,margin:0},200,r):"removeH"===e?o(t).animate({opacity:0},250).animate({width:0,padding:0,margin:0},200,r):"removeL"===e?o(t).animate({right:"100%"},250).animate({height:0,width:0,padding:0,margin:0},200,r):"remove"===e&&o(t).animate({opacity:0},250).animate({width:0,height:0,padding:0,margin:0},200,r)}function eventHandler(e,t,r="bind"){e="ontouchstart"in document.documentElement?({mousemove:"touchmove",mouseup:"touchend"})[e]:e,o(window).unbind(e,t),"bind"===r&&o(window).bind(e,t)}function getGap(e){let{node:t,parent:r={},dataId:n,rtl:s,index:a,level:l,context:d}=e;return({getClient:e=>"ontouchstart"in document.documentElement?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:{x:e.clientX,y:e.clientY},mouseMove(e){var{pos:t,size:i}=this.so,a=this.getClient(e);let l=r.row?"x":"y";var d=(a[l]-t[l])*(s?-1:1);this.so.newSize=d+i,o('[data-id="'+n+'"]').css({[({x:"width",y:"height"})[l]]:this.so.newSize})},mouseUp(){eventHandler("mousemove",this.mouseMove,"unbind"),eventHandler("mouseup",this.mouseUp,"unbind");let{newSize:e}=this.so;t.onResize(e)},getGap(){let{gap:e}=r;if(!(e="function"==typeof e?e({node:t,parent:r,index:a,level:l}):e)||!r)return null;let n={draggable:!1,onDragStart:e=>(e.preventDefault(),!1)};t.size&&t.onResize&&(n["ontouchstart"in document.documentElement?"onTouchStart":"onMouseDown"]=e=>{this.so={pos:this.getClient(e),size:t.size},eventHandler("mousemove",o.proxy(this.mouseMove,this)),eventHandler("mouseup",o.proxy(this.mouseUp,this))});let s="rvd-gap";e.className&&(s+=" "+e.className);let h={node:{...e,className:s,attrs:{...e.attrs,...n}},parent:r,level:l,index:a,context:d},c=new RVDAttrs(h).getAttrs(),{html:u=""}=e;return t.loading&&(u=""),i("div",{...c,children:u})}}).getGap()}function getHideClassName(e){let t,r,n,o,i;return e.show_xs&&(t=!1,r=!0,n=!0,o=!0),e.hide_xs&&(t=!0),e.show_sm&&(t=!0,r=!1,n=!0,o=!0),e.hide_sm&&(r=!0),e.show_md&&(t=!0,r=!0,n=!1,o=!0),e.hide_md&&(n=!0),e.show_lg&&(t=!0,r=!0,n=!0,o=!1),e.hide_lg&&(o=!0),t&&(i+=" rvd-hide-xs"),r&&(i+=" rvd-hide-sm"),n&&(i+=" rvd-hide-md"),o&&(i+=" rvd-hide-lg"),i}function Cls(e,t){let r=`rvd-${e}`;return t&&(r+=" "+t),r}export function renderCards(e){let{items:t=[],gap:r,attrs:n={}}=e;return i(l,{rootNode:{className:Cls("cards-container",n.className),column:[{className:Cls("cards"),style:{gap:r},column:t.map(e=>({style:{gap:r},row:e.map(e=>({className:"of-visible",flex:1,html:renderCard(e)}))}))}]}})}export function renderCardsRow(e=[],t){return i(l,{rootNode:{className:Cls("cards-row-container"),column:[{className:Cls("cards-row","of-visible"),style:{gap:t},row:e.map(e=>({className:"of-visible",html:renderCard(e)}))}]}})}export function renderCard(e){let{text:t,subtext:r,uptext:n,attrs:o={},before:s,after:a,header:d,footer:h,justify:c,classes:u={}}=e;return i(l,{rootNode:{attrs:o,onClick:o.onClick,className:Cls("card",o.className)+(c?" justify":""),style:o.style,column:[{show:!!d&&!Array.isArray(d),html:d,className:Cls("card-header",u.header)},{show:!!Array.isArray(d),className:Cls("card-header",u.header),row:()=>[{html:d[0]},{flex:1},{html:d[1]}]},{className:Cls("card-body",u.body),row:[{show:!!s,html:()=>s,align:"vh",className:Cls("card-before",u.before)},{flex:1,align:"v",column:[{show:!!n,html:n,className:Cls("card-uptext",u.uptext)},{html:t,className:Cls("card-text",u.text)},{show:!!r,html:()=>r,className:Cls("card-subtext",u.subtext)}]},{show:!!a,html:()=>a,align:"vh",className:Cls("card-after",u.after)}]},{show:!!h&&!Array.isArray(h),html:h,className:Cls("card-footer",u.footer)},{show:!!Array.isArray(h),className:Cls("card-footer",u.footer),row:()=>[{html:h[0]},{flex:1},{html:h[1]}]}]}})}function ReOrder(e){let{data:t,fromIndex:r,toIndex:n}=e,o=t[r],i=t.filter((e,t)=>t!==r);return i.splice(n,0,o),i}